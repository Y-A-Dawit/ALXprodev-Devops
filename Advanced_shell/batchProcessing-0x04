#!/bin/bash

# Create output directory
mkdir -p pokemon_data

# List of PokÃ©mon
pokemon_list=(bulbasaur ivysaur venusaur charmander charmeleon)

# Start each fetch in the background, track PIDs
declare -a pids

for pokemon in "${pokemon_list[@]}"; do
    (
        # Simulate a slow fetch with sleep
        sleep 5
        curl -s "https://pokeapi.co/api/v2/pokemon/${pokemon}" -o "pokemon_data/${pokemon}.json"
    ) &
    pids+=($!)
done

# Give them 2 seconds to run
sleep 2

# Kill the first background job as an example
kill "${pids[0]}"

# Wait for the rest
for pid in "${pids[@]}"; do
    wait "$pid" 2>/dev/null
done

echo "Completed. (One process was killed intentionally)"
