#!/bin/bash

# Directory to store fetched data
mkdir -p pokemon_data

# List of Pokémon to fetch
pokemon_list=(bulbasaur ivysaur venusaur charmander charmeleon)

# Function to fetch data for one Pokémon
fetch_pokemon() {
    local name=$1
    curl -s "https://pokeapi.co/api/v2/pokemon/$name" -o "pokemon_data/${name}.json"
    if [ $? -eq 0 ]; then
        echo "Fetched $name ✅"
    else
        echo "Failed to fetch $name ❌"
    fi
}

# Array to hold PIDs of background jobs
pids=()

# Start all fetch operations in background
for pokemon in "${pokemon_list[@]}"; do
    fetch_pokemon "$pokemon" &
    pids+=($!)  # Store background process ID
done

# Wait for all background processes to finish
for pid in "${pids[@]}"; do
    wait "$pid"
done

echo "All fetch operations completed ✅"
