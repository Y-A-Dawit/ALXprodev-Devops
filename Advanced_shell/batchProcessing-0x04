#!/bin/bash

# Create output directory if it doesn't exist
mkdir -p pokemon_data

# List of Pok√©mon
pokemon_list=(bulbasaur ivysaur venusaur charmander charmeleon)

# Function to fetch data for a single Pok√©mon
fetch_pokemon_data() {
    local pokemon=$1
    echo "Fetching $pokemon..."
    
    curl -s -f "https://pokeapi.co/api/v2/pokemon/$pokemon" -o "pokemon_data/${pokemon}.json"
    
    if [ $? -eq 0 ]; then
        echo "$pokemon fetched successfully ‚úÖ"
    else
        echo "Failed to fetch $pokemon ‚ùå"
    fi
}

# Trap SIGINT and cleanup background jobs
trap 'echo "Terminating background jobs..."; jobs -p | xargs kill; exit' SIGINT

# Start background fetch jobs
for pokemon in "${pokemon_list[@]}"
do
    fetch_pokemon_data "$pokemon" &
done

# Show background jobs
jobs

# Wait for all background jobs to complete
wait

echo "All Pok√©mon data fetched üéâ"
